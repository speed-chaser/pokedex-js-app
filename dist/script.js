const mainGrid=document.getElementById("main-grid"),header=document.getElementById("loading"),modalContainer=document.getElementById("modal-container"),pokemonRepository=(()=>{let e=[],t="https://pokeapi.co/api/v2/pokemon/?limit=151",a=t=>{e.push(t)},d=()=>(r(),fetch(t).then(e=>e.json()).then(e=>{e.results.forEach(e=>{let t={name:e.name,detailsUrl:e.url};a(t),o();let d=t.detailsUrl,s=/\/(\d+)\/?$/,l=d.match(s);l&&(t.imageUrl=`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${l[1]}.png`)})}).catch(e=>{console.error(e),o()})),s=e=>(r(),fetch(e.detailsUrl).then(e=>e.json()).then(t=>{e.imageUrl=t.sprites.front_default,e.imageUrlLg=t.sprites.other["official-artwork"].front_default,e.id=t.id,e.height=t.height,e.types=t.types,o()}).catch(e=>{console.error(e),o()})),l=e=>{modalContainer.innerHTML="",s(e).then(()=>{n(e),console.log(e)})},i=e=>{let t=document.createElement("button");t.classList.add("grid-item"),t.classList.add("col"),t.classList.add("btn"),t.classList.add("btn-primary"),t.classList.add("btn-bg"),t.setAttribute("data-toggle","modal"),t.setAttribute("data-target","#modal-container"),t.addEventListener("click",()=>{l(e)});let a=document.createElement("div");a.classList.add("pokemon"),a.innerText=e.name;let d=document.createElement("img");d.classList.add("small-icon"),d.setAttribute("willReadFrequently","true"),d.setAttribute("loading","lazy"),d.src=e.imageUrl,t.append(d,a),mainGrid.append(t)},n=e=>{modalContainer.classList.add("modal"),modalContainer.setAttribute("tabindex","-1"),modalContainer.setAttribute("role","dialog"),modalContainer.setAttribute("aria-labelledby","pokemonDetails"),modalContainer.setAttribute("aria-hidden","true");let t=document.createElement("div");t.classList.add("modal-dialog"),t.classList.add("modal-dialog-centered"),t.classList.add("modal-dialog-sm"),t.setAttribute("role","document");let a=document.createElement("div");a.classList.add("modal-content"),a.classList.add("bg-dark"),a.classList.add("no-select");let d=document.createElement("div");d.classList.add("modal-header"),d.classList.add("borderb-adjust"),d.classList.add("header-bg");let s=document.createElement("h1");s.classList.add("modal-title"),s.classList.add("pokemon-header"),s.classList.add("text-white"),s.innerText=e.name+" #"+e.id;let l=document.createElement("button");l.setAttribute("id","close-button"),l.classList.add("close"),l.setAttribute("type","button"),l.setAttribute("data-dismiss","modal"),l.setAttribute("aria-label","close");let i=document.createElement("span");i.setAttribute("aria-hidden","true"),i.innerHTML="&times;",l.append(i),d.append(s,l);let n=document.createElement("div");n.classList.add("modal-body"),n.classList.add("row"),n.classList.add("text-white");let r=document.createElement("div");r.classList.add("col-6");let o=document.createElement("p");e.types.length>1?o.innerText="Types: "+e.types[0].type.name+", "+e.types[1].type.name:o.innerText="Type: "+e.types[0].type.name;let m=document.createElement("p");m.innerText="Height: "+(e.height/10)+"m";let c=document.createElement("img");c.setAttribute("loading","lazy"),c.classList.add("col-6"),c.src=e.imageUrlLg,r.append(o,m),n.append(r),n.append(c),a.append(d,n),t.append(a),modalContainer.append(t)},r=()=>{console.log("Loading...")},o=()=>{console.log("Finished loading.")};return{add:a,getAll:()=>e,loadList:d,loadDetails:s,showDetails:l,addGridItem:i,showModal:n}})();pokemonRepository.loadList().then(()=>{pokemonRepository.getAll().forEach(e=>{pokemonRepository.addGridItem(e)})});